{% extends 'base.html' %}

{% block title %}DashBoard{% endblock %}

{% block head %}
<link href="/static/device/css/d_main.css" rel="stylesheet">
<script src="/static/device/js/d_main.js"></script>

<script type='text/javascript'>
	var now_date;
	var today_event = [];
	
	var doReload = function() {
		doClear();
		doGetEvents();
	}
	
	var doClear = function(){
		
	}
	
	var doGetEvents = function(){
		$.ajax({
			type : 'get',
			url : '{{url}}',
			beforeSend : function(req) {
			
			},
			success : function(data) {
				today_event = JSON.parse(data);
				
				show();
			},
		});
	};
	
	$(document).ready(function() {
		doReload();
		initDate();
		checkClass();
		
		setInterval("dpTime()",1000);
	});
	
	
function show() {
	$('#calendar').fullCalendar({
					header: {
						left: '',
						center: '',
						right: ''
					},
					timeFormat: 'H시(:mm)',
					columnFormat: 'ddd M/D',
					axisFormat: 'a h시',
					allDaySlot: false,
					defaultDate: now_date,
					defaultView: 'agendaWeek',
					editable: false, 
					minTime:'08:00:00',
					height: 'auto', 
					maxTime:'24:00:00',
					lang:'ko', 
					businessHours: {
						start: '00:00',
						end: '24:00',
						dow: [1,2,3,4,5]
					},
					now: now_date + 'T09:20:00',
					events: today_event
				});
	
}
</script>

{% endblock %}

{% block content %}

<body role="document">
<!-- <link rel='stylesheet' type='text/css' href='/media/libs/fullcalendar-2.3.2/fullcalendar.css' /> -->
<link rel='stylesheet' type='text/css' href='http://cdnjs.cloudflare.com/ajax/libs/fullcalendar/2.3.2/fullcalendar.min.css' />

<!-- <script type='text/javascript' src='/media/libs/fullcalendar-2.3.2/moment.min.js'></script> -->
<script type='text/javascript' src='http://cdnjs.cloudflare.com/ajax/libs/moment.js/2.10.6/moment.min.js'></script>

<!-- <script type='text/javascript' src='/media/libs/fullcalendar-2.3.2/fullcalendar.min.js'></script> -->
<script type='text/javascript' src='http://cdnjs.cloudflare.com/ajax/libs/fullcalendar/2.3.2/fullcalendar.min.js'></script>

<!-- <script src='/media/libs/fullcalendar-2.3.2/lang-all.js'></script> -->
<script type='text/javascript' src='http://cdnjs.cloudflare.com/ajax/libs/fullcalendar/2.3.2/lang/ko.js'></script>

<style type='text/css'>
	body {
		margin:0;
		padding:0;
		height:100%;
	 	padding-top: 90px;
	/*   padding-bottom: 30px; */
	}
	#calendar {
		width: 100%;
		height: 90%;
 		margin: 0 auto; 
	}
	.fc-toolbar {
		margin-bottom: 0;
		height: 0px
	}

</style>

 <!-- Fixed navbar -->
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container-fluid">
        <div class="navbar-header" >
          <img alt="Brand" src="/static/device/img/kmucs.png" height="70px"style="display: inline;"></img>
          <h1 style="display: inline; margin-left: 30px; vertical-align: middle;"><b>447호</b></h1>
        </div>
      </div>
    </nav>
 
 
    <div class="container-fluid theme-showcase" role="main" >

	        <!-- Main jumbotron for a primary marketing message or call to action -->
      <div class="row" >
      	<div class="col-sm-9" >
			<div id='calendar'></div>
		</div>
		<div class="col-sm-3" style="text-align: center;">
			<div class="well">
				<h2><span class="label label-primary", id="inClass"></span></h2>
				<div class="progress">
					<div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100" style="width: 45%", id="classProgress"></div>
				</div>

				<h4 id="className"></h4>
				<h4 id="professor"></h4>

			</div>
			<div class="well" style="text-align: center;">
				<h3 id="dpDate"></h3>
				<h3 id="dpTime"></h3>
			</div>
		</div>
	  </div>
	</div>
</body>
{% endblock %}
